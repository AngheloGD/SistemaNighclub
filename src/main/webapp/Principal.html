<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>La Rosa Roja</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
              integrity="sha384-wvfXpqpZZVQGK6TAh5n0/2xXSvrM9M9sH5hZvLpzfNlAYBMwULFqNS2tMP+J5SZ6" crossorigin="anonymous">
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#page-top"><img src="assets/img/navbar-logo.svg" alt="" /></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu                    
                    <i class="fas fa-bars ms-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                        <li class="nav-item"><a class="nav-link" href="Reporte.jsp">Reporte Cita</a></li>
                        <!--<li class="nav-item"><a class="nav-link" href="acerca.html">Acerca de Nosotros</a></li>-->
                        <!--<li class="nav-item"><a class="nav-link" href="Contraseña.html">Cambiar Contraseña</a></li>-->
                        <li class="nav-item"><a class="nav-link" href="Registro.jsp">Separar una cita</a></li>
                        <!--<li class="nav-item"><a class="nav-link" href="listado.jsp">Vista de Usuarios</a></li>-->
                        <!-- <li class="nav-item"><a class="nav-link" href="trabaja.html">Trabaja con nosotros</a></li>-->
                        <li class="nav-item"><a class="nav-link" href="Informacion.html">Las Cariñosas</a></li>

                        <button id="openChatBtn">AYUDA</button>


                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                               data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small">
                                    <span id="usernameSpan"></span>
                                </span>
                                <img class="img-profile rounded-circle" src="assets/img/programador (1).png">

                            </a>
                            <!-- Dropdown - User Information -->
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                 aria-labelledby="userDropdown">
                                <a class="dropdown-item"  href="listado.jsp"">
                                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"> </i>
                                    Perfil
                                </a>
                                <a class ="dropdown-item" href="Contraseña.html">
                                    <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Cambiar contraseña
                                </a>
                                <div class="dropdown-divider"></div>
                                <button id="salir" class="dropdown-item" >
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Cerrar Sesión
                                </button>

                            </div>
                        </li>
                    </ul>
                </div>

            </div>
        </nav>

        <!-- Masthead-->
        <header class="masthead">
            <div class="container">
                <!--<div class="masthead-subheading">La Rosa Roja</div>-->
                <div class="masthead-heading text-uppercase">Te presentamos la mejor experiencia de diversion para adultos.</div>
                <!-- <a class="btn btn-primary btn-xl text-uppercase" href="Index.html">Iniciar sesion</a>
                 <a class="btn btn-primary btn-xl text-uppercase" href="registro.html">Registrarme</a>-->
            </div>
        </header>
        <!--<script>
            $(document).ready(function () {
                // Obtener el nombre de usuario almacenado en LocalStorage mas na
                var username = localStorage.getItem('username');

                // Verificar si se ha iniciado sesión y si se ha obtenido el nombre de usuario xd
                if (username) {
                    // Insertar el nombre de usuario en el lugar deseado
                    $("#usernameSpan").text(username);
                }
            });
        </script>-->
        <!-- Services-->
        <section class="page-section" id="services">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Servicios</h2>
                    <h3 class="section-subheading text-muted">Ofrecemos diferentes servicios para asegurar tu entretenimiento dentro de este club.</h3>
                </div>
                <div class="row text-center">
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-shopping-cart fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Table Dance</h4>
                        <p class="text-muted">La vieja clasica que no necesita introduccion, disponible con tan solo adquirir tu entrada al establecimiento, a nuestras chicas no les molestaria una propina extra ;) .</p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-laptop fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Masajes Tantricos</h4>
                        <p class="text-muted">Si deseas relajarte con una de nuestras especialistas del arte corporal, puedes hacerlo aqui, la relajacion esta garantizada.</p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-lock fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Bar</h4>
                        <p class="text-muted">Si deseas relajarte con unos vasos de liquido vital, tenemos la mejor seleccion de bebidas alcoholicas y/o no alcoholicas a tu disposicion.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About-->
        <section class="page-section" id="about">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Historia</h2>
                    <h3 class="section-subheading text-muted">Una pequeña muestra de nuestro origen.</h3>
                </div>
                <ul class="timeline">
                    <li>
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/4.jpg" alt="..." /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>23/10/2023</h4>
                                <h4 class="subheading">Alumnos del Ingeniero Carlos Chinga</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Bueno este proyecto llega Gracias al INGENIERO CHINGA, Gracias por su buena enseñanza </p></div>
                        </div>
                    </li>
                    <li class="timeline-inverted">
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/4.jpg" alt="..." /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>26/10/2023</h4>
                                <h4 class="subheading">La Travesia inicia</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Los integrantes se pusieron de acuerdo para poder emprender esta labor</p></div>
                    </li>
                    <li>
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/4.jpg" alt="..." /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>27/10/2023</h4>
                                <h4 class="subheading">Tortura</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">El dia sabado con s de sangre se hizo notar en la cara de los integrantes, pero aun seguian con la frente en alto para seguir peleando por esa nota aprobatoria</p></div>
                        </div>
                    </li>
                    <li class="timeline-inverted">
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/4.jpg" alt="..." /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>30/10/2023</h4>
                                <h4 class="subheading">Demostracion</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Llegando a clases con la determinacion en alto, se ponen a prueba frente al ingeniero.</p></div>
                        </div>
                    </li>
                    <li class="timeline-inverted">
                        <div class="timeline-image">
                            <h4>
                                Apruebenos
                                <br />
                                Pe
                                <br />
                                Inge
                            </h4>
                        </div>
                    </li>
                </ul>
            </div>
        </section>
        <!-- Team-->
        <section class="page-section bg-light" id="team">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Nuestro equipo</h2>
                    <h3 class="section-subheading text-muted">Estas personas estuvieron presente en el desarrollo de esta pagina:</h3>
                </div>
                <div class="row">
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="assets/img/team/Guerrero.jpg" alt="..." />
                            <h4>Guerrero Diaz, Anghelo</h4>
                            <p class="text-muted">Chino</p>
                            <!--<a class="btn btn-dark btn-social mx-2" href="https://www.facebook.com/AngheloGD" aria-label="Guerrero Diaz Facebook"><i class="fab fa-twitter"></i></a>-->
                            <a class="btn btn-dark btn-social mx-2" href="https://www.facebook.com/AngheloGD" aria-label="Guerrero Diaz Facebook"><i class="fab fa-facebook-f"></i></a>
                            <!--<a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Diana Petersen LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>-->
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="assets/img/team/Haro.jpg" alt="..." />
                            <h4>Haro Grados, Marco</h4>
                            <p class="text-muted">La beba</p>
                            <!--<a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker Twitter Profile"><i class="fab fa-twitter"></i></a>-->
                            <a class="btn btn-dark btn-social mx-2" href="https://www.facebook.com/markanthony.harogrados" aria-label="Haro Grados Facebook Profile"><i class="fab fa-facebook-f"></i></a>
                            <!--<a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>-->
                        </div>
                    </div> 

   

                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="assets/img/team/1.jpg" alt="..." />
                            <h4>Brayan Perez</h4>
                            <p class="text-muted">La canina </p>
                            <!-- <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker Twitter Profile"><i class="fab fa-twitter"></i></a>-->
                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker Facebook Profile"><i class="fab fa-facebook-f"></i></a>
                            <!--<a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>-->
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-lg-8 mx-auto text-center"><p class="large text-muted">Bueno este trabajo fue hecho con sudor, sangre y horas sin dormir.</p></div>
                </div>
            </div>
        </section>

        <footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-start">Ingenieria &copy; Equipo de Cripto II 2023</div>

                    <div class="col-lg-4 text-lg-end">
                        <a class="link-dark text-decoration-none me-3" href="Politicas.html">Privacidad y politicas</a>

                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            function verificarSesion() {
                $.ajax({
                    url: 'validarSesion',
                    type: 'GET',
                    dataType: 'json',
                    success: function (response) {
                        if (response.resultado === "ok") {
                            //$("#usernameSpan").text(response.logiUsua);
                        } else {
                            // El usuario no está autenticado, redirigir a index.html
                            console.log("Redirigiendo a index.html");
                            window.location.href = "index.html";
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log("Error: " + textStatus + ", " + errorThrown);
                        // Si ocurre un error, redirigir a index.html
                        window.location.href = "index.html";
                    }
                });
            }

            function cerrarSesion(redirectURL) {
                $.getJSON("cerrarSession", function (data) {
                    // Redirige a la URL de redirección especificada (o a "index.html" por defecto)
                    if (redirectURL) {
                        window.location.replace(redirectURL);
                    } else {
                        window.location.replace("index.html");
                    }
                })
                        .fail(function () {
                            console.error("Error al cerrar sesión");
                            // Si ocurre un error al cerrar sesión, redirige a index.html de todos modos
                            window.location.replace("index.html");
                        });
            }

            $(document).ready(function () {
                verificarSesion();
                $("#salir").click(function () {
                    cerrarSesion();
                });
            });
        </script>
        <link href="bot/chat.css" rel="stylesheet" type="text/css"/>

        <!-- Contenedor del chat y del perrito -->
        <div id="chat-container" style="display: none;">
            <!-- Encabezado del chat con botones para minimizar y cerrar -->
            <div class="chat-header">
                <div>
                    <span id="loggedInUsername"></span> <!-- Nuevo elemento para mostrar el nombre del usuario -->
                </div>
                <div>
                    <button onclick="closeChat()" style="background: none; border: none; cursor: pointer;">
                        <img src="bot/cerca.png" alt="Cerrar" width="20">
                    </button>
                </div>
            </div>
            <audio id="welcomeAudio">
                <source src="bot/bot.mp3" type="audio/mpeg">
                Your browser does not support the <code>audio</code> tag.
            </audio>
            <!-- Área del chat -->
            <div id="chatbox"></div>
            <!-- Campo de entrada del usuario y botón de enviar -->
            <div style="display: flex; align-items: center;">
                <input type="text" id="userInput" placeholder="Escribe tu mensaje..."
                       style="flex: 1; padding: 8px; border: none; border-top: 1px solid #ddd; box-sizing: border-box; outline: none; margin: 10px;"
                       onkeydown="if (event.keyCode == 13)
                                   sendMessage();">
                <button id="sendBtn" onclick="sendMessage()"
                        style="background: none; border: none; cursor: pointer;">
                    <img src="bot/enviar-mensaje.png" alt="Enviar mensaje" width="20">
                </button>
            </div>
        </div>

        <!-- Contenedor del perrito y audio -->
        <div id="puppyContainer" class="overlay" style="display: none;">
            <img id="puppy" class="puppy" src="css/vlu.gif" alt="Perrito en movimiento">
            <audio id="welcomeAudio">
                <source src="bot/bot.mp3" type="audio/mpeg">
            </audio>
        </div>

        <!-- Botón para abrir el chat y mostrar el perrito con música 
    <button id="openChatBtn">Abrir Chat</button>-->

        <!-- Tu código JavaScript -->
        <script>
            var chatContainer = document.getElementById('chat-container');
            var openChatBtn = document.getElementById('openChatBtn');
            var loggedInUsernameSpan = document.getElementById('loggedInUsername'); // Nuevo elemento

            var chatOpened = false;
            openChatBtn.addEventListener('click', function () {
                if (!chatOpened) {
                    showPuppyAndPlayAudio(); // Mostrar perrito y reproducir audio al abrir el chat
                    chatOpened = true;
                    // Deshabilitar el botón temporalmente por, por ejemplo, 5 segundos
                    openChatBtn.disabled = true;
                    setTimeout(function () {
                        openChatBtn.disabled = false;
                    }, 5000);
                }
            });
            // Función para actualizar el nombre del usuario logueado
            function updateLoggedInUsername() {
                var username = localStorage.getItem('username');
                loggedInUsernameSpan.textContent = username || ''; // Mostrar el nombre o dejar en blanco si no hay nombre
            }

            // Llamada inicial para mostrar el nombre del usuario si ya está logueado
            updateLoggedInUsername();
            function minimizeChat() {
                chatContainer.style.display = 'none'; // Oculta el chat pero mantiene la visibilidad
            }

            function closeChat() {
                chatContainer.style.display = 'none'; // Oculta y borra el chat
            }

            function sendMessage() {
                var userInput = document.getElementById('userInput').value;
                var chatbox = document.getElementById('chatbox');
                // Mostrar el mensaje del usuario en el chatbox
                chatbox.innerHTML += '<p><strong>Tú:</strong> ' + userInput + '</p>';
                // Simular respuestas del chatbot según la opción elegida por el usuario
                if (userInput === '1') {
                    chatbox.innerHTML += '<p><strong>Chatbot:</strong> Hola, si claro en nuestra pagina en los encabezados dice separar cita, seleccione su tipo de servicio y la trabajadora que desea.. ¡Provecho! :)</p>';
                } else if (userInput === '2') {
                    chatbox.innerHTML += '<p><strong>Chatbot:</strong> Hola, si claro en nuestra pagina en los encabezados existe "Las cariñosa", de clic allí para ver la información de las trabajadoras..</p>';
                } else if (userInput === '3') {
                    chatbox.innerHTML += '<p><strong>Chatbot:</strong> Puedes realizar cambios en tu pedido contactando a nuestro servicio al cliente.</p>';
                } else {
                    // Respuesta genérica si no se reconoce la opción
                    chatbox.innerHTML += '<p><strong>Chatbot:</strong> No entiendo. ¿Puedes elegir una opción válida?</p>';
                    // Enlace para comunicarse con el administrador
                    chatbox.innerHTML += '<p><strong>Chatbot:</strong> Si no estás conforme con las respuestas, comunícate directamente con el administrador. <a href="chat.jsp">Haz clic aquí</a></p>';
                }

                // Limpiar el campo de entrada
                document.getElementById('userInput').value = '';
                // Hacer scroll hacia abajo para mostrar el último mensaje
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            function showPuppyAndPlayAudio() {
                var puppyContainer = document.getElementById('puppyContainer');
                var welcomeAudio = document.getElementById('welcomeAudio');
                var chatbox = document.getElementById('chatbox');
                var loggedInUsernameSpan = document.getElementById('loggedInUsername');
                // Obtener la hora actual
                var currentHour = new Date().getHours();
                // Definir el saludo basado en la hora del día
                var greeting = "";
                if (currentHour >= 5 && currentHour < 12) {
                    greeting = "¡Buenos días!";
                } else if (currentHour >= 12 && currentHour < 18) {
                    greeting = "¡Buenas tardes!";
                } else {
                    greeting = "¡Buenas noches!";
                }

                // Agregar el nombre de usuario al saludo
                updateLoggedInUsername(); // Actualizar el nombre del usuario antes de mostrar el saludo

                // Reproducir el audio
                welcomeAudio.play();
                // Mostrar el saludo con el nombre del usuario en el chatbox
                chatbox.innerHTML += '<p><strong>Chatbot:</strong> ' + greeting + ' ' +
                        (loggedInUsernameSpan.textContent ? loggedInUsernameSpan.textContent + ', ' : '') +
                        '¿En qué puedo ayudarte hoy?</p>';
                // Preguntas
                chatbox.innerHTML += '<p><strong>Chatbot:</strong> 1. ¿Cómo puedo sacar una cita con las caninas?</p>';
                chatbox.innerHTML += '<p><strong>Chatbot:</strong> 2. ¿Como puedo ver las trabajadoras del sistema?</p>';
                chatbox.innerHTML += '<p><strong>Chatbot:</strong> 3. ¿Puedo realizar un cambio de trabajadora luego de separar la cita?</p>';
                // Mostrar la imagen del perrito
                puppyContainer.style.display = 'flex';
                // Ocultar el gif después de 4 segundos (4000 milisegundos)
                setTimeout(function () {
                    hidePuppy();
                    chatContainer.style.display = 'flex'; // Mostrar el chat después de la animación del gif
                }, 4000);
            }

            function hidePuppy() {
                var puppyContainer = document.getElementById('puppyContainer');
                // Oculta la imagen del perrito
                puppyContainer.style.display = 'none';
            }
        </script>

    </body>
</html>